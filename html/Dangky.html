<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng Ký</title>
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/2368363_NguyenKimTrung/css/dangky.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <style>
        body{
    background-color: rgb(251,249,246);
}
.fancy {

    font-family: 'Dancing Script';
}


.dropdown:hover .dropdown-menu {
display: block;
}

.dropdown-menu {
    list-style: none;
    position: absolute;
    top: 100%;
    left: 0;
    background: rgb(229,171,163);
    padding: 20px;
    margin: 0;
    display: none;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
.navbar-custom {
    margin: 20px 70px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.nav-links {
    display: flex;
    align-items: center;
}

.nav-item a {
    color: black;
    font-size: 16px;
    margin-left: 20px;
    text-decoration: none;
}

.nav-item img {
    height: 100px;
    width: auto;
}
.search-wrapper {
    background-color: rgb(229,171,163);
    border-radius: 50px;
    display: flex;
    align-items: center;
    padding: 8px 16px;
    width: 100%;
    max-width: 500px;
}

.search-wrapper input {
    border: none;
    background: transparent;
    color: white;
    outline: none;
    flex: 1;
    padding-left: 10px;
    font-size: 16px;
}

.search-wrapper button {
    background-color: rgb(251,249,246);
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: rgb(229,171,163);
    font-size: 16px;
    cursor: pointer;
}

.search-wrapper button:hover {
    background-color: black;
}
.menu-wrapper {
    margin: 20px 70px;
    background-color: rgb(229, 171, 163); /* màu nền mày muốn */
    border-radius: 50px;
    padding: 16px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.menu-left,
.menu-right {
    display: flex;
    align-items: center;
}

.menu-item {
    margin-right: 30px;
    color: white;
    font-weight: 500;
    display: flex;
    align-items: center;
    font-size: 20px;
    cursor: pointer;
}

.menu-item i {
    margin-right: 8px;
}

.menu-item .badge {
    margin-left: 6px;
    font-size: 10px;
    padding: 3px 6px;
    border-radius: 10px;
    background-color: red;
    color: white;
}

.menu-button {
    background-color: rgb(251,249,246);
    border: none;
    color: rgb(229,171,163);
    padding: 10px 18px;
    border-radius: 30px;
    font-weight: 500;
    display: flex;
    align-items: center;
    font-size: 15px;
}

.menu-button i {
    margin-right: 6px;
}
.nav-link.dropdown-toggle {
    color: #fff !important; 
}
.cart-icon {
    background-color: rgb(251,249,246);
    border: none;
    color: rgb(229,171,163);
    padding: 10px 18px;
    border-radius: 30px;
    font-weight: 500;
    display: flex;
    align-items: center;
    font-size: 15px;
}

.cart-icon a {
    margin-right: 6px;
}
#cart-count {
    background: rgb(229,171,163);
    color: white;
    font-size: 12px;
    padding: 2px 8px;
    border-radius: 50%;
}

.register-container h2 {
    margin-bottom: 25px;
    text-align: center;
    color: #002d62;
}

.form-control {
    border-radius: 5px;
    margin-bottom: 15px;
    padding: 10px 15px;
}

.btn-primary {
    background-color: #ff6f61;
    border: none;
    width: 100%;
    padding: 12px;
    border-radius: 5px;
    font-weight: 500;
}

.btn-primary:hover {
    background-color: #e65b50;
}


.input-group {
    position: relative;
    margin-bottom: 20px;
}

.input-group input {
    padding-left: 40px !important;
}
.register-container{
    text-align: center;
    margin: 20px 30%;
    width: 600px;
}
footer ul li a {
    color: rgb(229, 171, 163);
}

footer ul li a:hover {
    text-decoration: underline;
}
    </style>
</head>

<body>
  <div class="header">
    <div class="navbar-custom">
      <ul class="nav nav-links">
        <li class="nav-item">
          <a href="../index.html">
            <img src="../img/logo.png" alt="Logo">
          </a>
        </li>
        <li class="nav-item" id="auth-link"></li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="goToThanhToan(event)">Thanh toán</a>
        </li>
        <li class="nav-item">
          <a class="nav-link disabled" href="#">CONTACT : 086868686</a>
        </li>
      </ul>
    
      <div class="search-wrapper">
        <input type="text" placeholder="What are you looking for?">
        <button type="submit">
          <i class="fas fa-search"></i>
        </button>
      </div>
    </div>
    <div class="menu-wrapper">
      <div class="menu-left">
        <div class="menu-item">
          <a href="../html/NewProduct.html" style="text-decoration: none; color: white;">
            <i class="fas fa-shopping-basket"></i> New Products
          </a>
        </div>
        <div class="menu-item">
          <a href="../index.html#best-sales" style="text-decoration: none; color: white;">
            Best Sales <span class="badge">HOT</span>
          </a>
          
        </div>
        <div class="menu-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="offersDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Danh mục sản phẩm 
          </a>
          <div class="dropdown-menu" aria-labelledby="offersDropdown">
            <a class="dropdown-item" href="../index.html#may-dien">Máy Cơ Khí Dùng Điện</a>
            <a class="dropdown-item" href="../index.html#may-nn">Máy Nông Nghiệp</a>
            <a class="dropdown-item" href="../index.html#may-pin">Máy Cơ Khí Dùng Pin</a>
          </div>
        </div>
        
        <div class="menu-item">News</div>
      </div>
    
      <div class="menu-right">
        <a href="../html/GioHang.html" class="cart-icon">
          <i class="fas fa-shopping-cart"></i>
          <span id="cart-count">0</span>
        </a>
      </div>
    </div>
  </div>
  <div class="register-container">
      <h2>Đăng Ký Tài Khoản</h2>
      <form id="register-form">
          <div class="input-group">
              <input type="text" class="form-control" id="name" placeholder="Họ và tên" required>
              <div class="invalid-feedback" id="name-feedback">Vui lòng nhập họ tên hợp lệ</div>
          </div>
          <div class="input-group">
              <input type="email" class="form-control" id="email" placeholder="Email" required>
              <div class="invalid-feedback" id="email-feedback">Vui lòng nhập email hợp lệ (ví dụ: example@domain.com)
              </div>
          </div>
          <div class="input-group">
              <input type="password" class="form-control" id="password" placeholder="Mật khẩu" required>
              <div class="invalid-feedback" id="password-feedback">Mật khẩu phải có ít nhất 6 ký tự</div>
          </div>
          <div class="input-group">
              <input type="password" class="form-control" id="confirm-password" placeholder="Nhập lại mật khẩu"
                  required>
              <div class="invalid-feedback" id="confirm-feedback">Mật khẩu không trùng khớp</div>
          </div>
          <button type="submit" class="btn btn-primary mt-3">Đăng Ký</button>
          <div class="text-center mt-2">
              <a href="../index.html" class="btn btn-secondary w-100">Quay lại</a>
          </div>
          <p class="mt-3 text-center">Đã có tài khoản? <a href="./dangnhap.html">Đăng nhập ngay</a></p>

      </form>
  </div>
  <hr style="border: none; height: 2px; background-color:rgb(228, 155, 146);">
  <footer  class="py-5" style="color: rgb(229, 171, 163);">
    <div class="container">
      <div class="row">
        <div class="col-md-3 mb-4">
          <img src="../img/logo.png" alt="FlowerCorner logo" class="mb-3" style="max-width: 150px;">
          <p class="mb-1">Hotline: 1999 999 999 - 0888 888 888</p>
          <p class="mb-3">Email: lafleur@gmail.com</p>
  
          <img src="../img/qr-code.png" alt="QR Code" class="mb-2" style="width: 100px;">
          <p class="mb-2">Tải ứng dụng ngay!</p>
          <div class="d-flex">
            <img src="../img/appstore.png" alt="App Store" class="mr-2" style="width: 110px;">
            <img src="../img/ggplay.png" alt="Google Play" style="width: 110px;">
          </div>
        </div>
  
        <!-- Customer Care -->
        <div class="col-md-3 mb-4">
          <h5 class="font-weight-bold mb-3">CHĂM SÓC KHÁCH HÀNG</h5>
          <ul class="list-unstyled" >
            <li><a href="#">Giới Thiệu</a></li>
            <li><a href="#">Liên Hệ</a></li>
            <li><a href="#">Chính Sách Vận Chuyển</a></li>
            <li><a href="#">Câu Hỏi Thường Gặp</a></li>
            <li><a href="#">Hình Thức Thanh Toán</a></li>
            <li><a href="#">Bảo Mật Thông Tin</a></li>
            <li><a href="#">Chính Sách Hoàn Tiền</a></li>
            <li><a href="#">Xử Lý Khiếu Nại</a></li>
            <li><a href="#">Tại Sao Nên Chọn FlowerCorner.vn</a></li>
            <li><a href="#">Blog</a></li>
          </ul>
        </div>
  
        <!-- Social -->
        <div class="col-md-2 mb-4">
          <h5 class="font-weight-bold mb-3">THEO DÕI</h5>
          <ul class="list-unstyled">
            <li><a href="#">Facebook</a></li>
            <li><a href="#">Twitter</a></li>
            <li><a href="#">Instagram</a></li>
            <li><a href="#">LinkedIn</a></li>
            <li><a href="#">YouTube</a></li>
          </ul>
        </div>
  
        <!-- Shop Info -->
        <div class="col-md-4">
          <h5 class="font-weight-bold mb-3">SHOP HOA LAFLEUR</h5>
          <p><strong>Cửa hàng chính:</strong><br>1 , P.5, Q.1, TP.HCM</p>
          <p><strong>Cửa Hàng TP.HCM:</strong><br>111 , P.5, Q.1, TP.HCM</p>
          <p><strong>Chi nhánh Hà Nội:</strong><br>11, Ba Đình, Hà Nội</p>
          <p><strong>CÔNG TY TNHH NKT</strong><br>Mã số thuế: 0123456789</p>
        </div>
  
      </div>
    </div>
  </footer>
  <script>
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const confirmPasswordInput = document.getElementById('confirm-password');

    function validateName(name) {
        const trimmed = name.trim();
        // Kiểm tra độ dài và ký tự hợp lệ trước
        const basicRegex = /^[\p{L}\s]{2,50}$/u;
        if (!basicRegex.test(trimmed)) return false;
    
        // Kiểm tra từng từ phải viết hoa chữ cái đầu
        const words = trimmed.split(/\s+/);
        for (let word of words) {
            if (!/^[\p{Lu}][\p{Ll}]+$/u.test(word)) {
                return false;
            }
        }
        return true;
    }


    function validateEmail(email) {
        const regex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        return regex.test(email);
    }

    function validatePassword(password) {
        return password.length >= 6;
    }

    function showError(input, feedbackId) {
        input.classList.add('is-invalid');
        document.getElementById(feedbackId).style.display = 'block';
    }

    function hideError(input, feedbackId) {
        input.classList.remove('is-invalid');
        document.getElementById(feedbackId).style.display = 'none';
    }

    document.getElementById('register-form').addEventListener('submit', function (e) {
        e.preventDefault();

        let isValid = true;

        const name = nameInput.value;
        const email = emailInput.value;
        const password = passwordInput.value;
        const confirmPassword = confirmPasswordInput.value;

        // Reset lỗi
        hideError(nameInput, 'name-feedback');
        hideError(emailInput, 'email-feedback');
        hideError(passwordInput, 'password-feedback');
        hideError(confirmPasswordInput, 'confirm-feedback');

        if (!validateName(name)) {
            showError(nameInput, 'name-feedback');
            isValid = false;
        }

        if (!validateEmail(email)) {
            showError(emailInput, 'email-feedback');
            isValid = false;
        }

        if (!validatePassword(password)) {
            showError(passwordInput, 'password-feedback');
            isValid = false;
        }

        if (password !== confirmPassword) {
            showError(confirmPasswordInput, 'confirm-feedback');
            isValid = false;
        }

        const existingUsers = JSON.parse(localStorage.getItem('users')) || [];
        if (existingUsers.some(user => user.email === email)) {
            showError(emailInput, 'email-feedback');
            document.getElementById('email-feedback').textContent = 'Email này đã được đăng ký!';
            isValid = false;
        }

        if (!isValid) return;

        const newUser = {
            name,
            email,
            password,
            registrationDate: new Date().toISOString()
        };

        existingUsers.push(newUser);
        localStorage.setItem('users', JSON.stringify(existingUsers));
        localStorage.setItem('currentUser', JSON.stringify(newUser));

        alert('Đăng ký thành công!');
        window.location.href = '../index.html';
    });

    nameInput.addEventListener('input', () => {
        validateName(nameInput.value) ? hideError(nameInput, 'name-feedback') : showError(nameInput, 'name-feedback');
    });

    emailInput.addEventListener('input', () => {
        validateEmail(emailInput.value) ? hideError(emailInput, 'email-feedback') : showError(emailInput, 'email-feedback');
    });

    passwordInput.addEventListener('input', () => {
        validatePassword(passwordInput.value) ? hideError(passwordInput, 'password-feedback') : showError(passwordInput, 'password-feedback');
    });

    confirmPasswordInput.addEventListener('input', () => {
        confirmPasswordInput.value === passwordInput.value ? hideError(confirmPasswordInput, 'confirm-feedback') : showError(confirmPasswordInput, 'confirm-feedback');
    });
    function updateAuthLink() {
      const isLoggedIn = localStorage.getItem('isLoggedIn');
      const authLink = document.getElementById('auth-link');

      if (isLoggedIn) {
        authLink.innerHTML = `<a class="nav-link" href="#" onclick="logout()">Đăng xuất</a>`;
      } else {
        authLink.innerHTML = `<a class="nav-link" href="../html/DangNhap.html">Đăng nhập</a>`;
      }
    }

    function logout() {
      localStorage.removeItem('isLoggedIn');
      localStorage.removeItem('user');
      localStorage.removeItem('cart');
      alert("Bạn đã đăng xuất!");
      updateAuthLink();
      window.location.href = "../index.html";
    }
    document.addEventListener('DOMContentLoaded', updateAuthLink);
    function goToThanhToan(event) {
      event.preventDefault();
      const isLoggedIn = localStorage.getItem('isLoggedIn');
      if (!isLoggedIn) {
        alert("Bạn cần đăng nhập để tiếp tục thanh toán!");
        window.location.href = "../html/DangNhap.html"; // đổi nếu trang login khác
      } else {
        window.location.href = "./ThanhToan.html";
      }
    }
  </script>
</body>

</html>
